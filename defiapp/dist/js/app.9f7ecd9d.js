(function(t){function e(e){for(var n,s,i=e[0],u=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==o[u]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},2:function(t,e){},20:function(t,e){},21:function(t,e){},22:function(t,e){},23:function(t,e){},2464:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.transferVaultDialog,callback:function(e){t.transferVaultDialog=e},expression:"transferVaultDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v(" Transfer Vault ")]),a("v-text-field",{attrs:{label:"Recipient Address",type:"text",required:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v(" cancel ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.transferVault}},[t._v(" Transfer ")])],1)],1)],1)},o=[],r=a("1da1"),s=(a("96cf"),{props:["id"],data:function(){return{address:""}},computed:{bnbprice:function(){return this.$store.state.constant.bnbprice},gDaiPrice:function(){return this.$store.state.constant.gDaiPrice},transferVaultDialog:function(){return this.$store.state.vault.transferVaultDialog},user:function(){return this.$store.state.currentUser.user}},methods:{transferVault:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.transferVault(t.id,t.address).send({from:t.user.address});case 4:t.$toast.success("vault Transferred successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.close(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error("Transaction Reverted."),t.$store.dispatch("loading/activateLoader",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},close:function(){this.$store.dispatch("vault/transferVaultDialog",!1)}},mounted:function(){}}),i=s,u=a("2877"),l=Object(u["a"])(i,n,o,!1,null,null,null);e["default"]=l.exports},3:function(t,e){},4:function(t,e){},"4d0e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{height:"70vh","margin-top":"10vh"}},[a("div",{staticClass:"top-bar"},[a("h4",{staticClass:"top-title"},[t._v("Your Vaults")]),a("div",{staticClass:"top-buttons"},[a("button",{staticClass:"flex items-center rounded-lg bg-pink-deeper text-sm text-white py-2 px-3 search-button ",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"mr-2 ",on:{click:t.openSearch}},[t._v("Search")])]),a("button",{staticClass:"flex items-center rounded-lg bg-pink-deeper text-sm text-white py-2 px-3 search-button "},[a("div",{staticClass:"mr-2 ",on:{click:t.create}},[t._v("Create")])])])]),t.search?a("div",{staticClass:" ",staticStyle:{background:"hsl(225, 20%, 4%)","padding-bottom":"20px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.valtId,expression:"valtId"}],staticClass:"form-control",staticStyle:{height:"40px","border-radius":"20px"},attrs:{type:"number",placeholder:"Vault ID"},domProps:{value:t.valtId},on:{input:function(e){e.target.composing||(t.valtId=e.target.value)}}})]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"flex items-center rounded-lg bg-pink-deeper text-sm text-white py-2 px-3 search-button"},[a("div",{staticClass:"mr-2 ",on:{click:function(e){return t.searchVault()}}},[t._v("Go")])])])])]):t._e(),a("div",{staticClass:"buttom-container"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.vaults,"items-per-page":5,"footer-props":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",prevIcon:"mdi-minus",nextIcon:"mdi-plus"}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",{on:{click:function(a){return t.openVault(e.item.id)}}},[a("td",[t._v(t._s(e.item.id))]),a("td",[t._v(t._s(e.item.vaultCollateral))]),a("td",[a("span",[t._v(t._s(e.item.debt))])]),a("td",[t._v(" "+t._s(e.item.ratio)+" ")])])]}}])})],1)])},o=[],r=a("53ca"),s=a("1da1"),i=(a("ac1f"),a("841c"),a("96cf"),{data:function(){return{valtId:"",search:!1,vaults:[],dialog:!1,logo:a("e429"),headers:[{text:"Vault ID",sortable:!1,value:"id"},{text:"Collateral (ETH)",value:"Collateral"},{text:"Debt gDai",value:"Debt"},{text:"Ratio(%)",value:"ratio"}]}},computed:{user:function(){return this.$store.state.currentUser.user}},mounted:function(){var t=this;setTimeout((function(){t.rescanVaults(),t.loadVault()}),1e3)},methods:{searchVault:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.dispatch("loading/activateLoader",!0),""!=t.valtId){e.next=5;break}return t.$toast.error("Enter Vault ID"),t.$store.dispatch("loading/activateLoader",!1),e.abrupt("return");case 5:return e.next=7,window.tokenContract.methods.vaultExistence(t.valtId).call();case 7:a=e.sent,a?(t.$store.dispatch("loading/activateLoader",!1),t.$router.push("/vault/"+t.valtId)):(t.$toast.error("Enter a Valid Vault ID"),t.$store.dispatch("loading/activateLoader",!1));case 9:case"end":return e.stop()}}),e)})))()},openSearch:function(){this.search=!0},openVault:function(t){this.$router.push("/vault/"+t)},loadVault:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.vaults=[],console.log(t.user.address),a=null!=localStorage.getItem(t.user.address.toLowerCase())?JSON.parse(localStorage.getItem(t.user.address.toLowerCase())):[],console.log(a),n=0;case 5:if(!(n<a.length)){e.next=22;break}return o={},o.id=a[n],e.next=10,window.tokenContract.methods.vaultDebt(a[n]).call();case 10:return o.debt=e.sent,o.debt=window.web3.utils.fromWei(o.debt),e.next=14,window.tokenContract.methods.vaultCollateral(a[n]).call();case 14:o.vaultCollateral=e.sent,o.vaultCollateral=window.web3.utils.fromWei(o.vaultCollateral),console.log(Object(r["a"])(o.debt)),o.ratio=0,t.vaults.push(o);case 19:n++,e.next=5;break;case 22:case"end":return e.stop()}}),e)})))()},rescanVaults:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,o,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.tokenContract.methods.vaultCount().call();case 2:a=e.sent,console.log(a),n=null!=localStorage.getItem(t.user.address.toLowerCase())?JSON.parse(localStorage.getItem(t.user.address.toLowerCase())):[],console.log(n),o=[],r=0;case 8:if(!(r<a)){e.next=17;break}return e.next=11,window.tokenContract.methods.vaultOwner(r).call();case 11:s=e.sent,console.log(s),s.toLowerCase()==t.user.address.toLowerCase()&&(o.push(r),localStorage.setItem(t.user.address.toLowerCase(),JSON.stringify(o)));case 14:r++,e.next=8;break;case 17:case"end":return e.stop()}}),e)})))()},create:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("loading/activateLoader",!0),t.$store.dispatch("vault/createVault").then((function(e){var a=null!=localStorage.getItem(t.user.address)?JSON.parse(localStorage.getItem(t.user.address)):[];a.push(e),localStorage.setItem(t.user.address,JSON.stringify(a)),t.$toast.success("vault created successfully"),t.rescanVaults(),t.loadVault(),t.$store.dispatch("loading/activateLoader",!1)})).catch((function(e){t.$toast.error("transaction reverted"),console.log(e),t.$store.dispatch("loading/activateLoader",!1)}));case 2:case"end":return e.stop()}}),e)})))()}}}),u=i,l=a("2877"),c=Object(l["a"])(u,n,o,!1,null,null,null);e["default"]=c.exports},"4e2b4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.withdrawDialog,callback:function(e){t.withdrawDialog=e},expression:"withdrawDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v(" Withdraw Collateral ")]),a("v-text-field",{attrs:{label:"Withdraw Amount",type:"number",required:""},model:{value:t.withdrawAmount,callback:function(e){t.withdrawAmount=e},expression:"withdrawAmount"}}),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v(" cancel ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.withdraw}},[t._v(" withdraw ")])],1)],1)],1)},o=[],r=a("1da1"),s=(a("96cf"),{props:["id"],data:function(){return{withdrawAmount:0}},computed:{withdrawDialog:function(){return this.$store.state.vault.withdrawDialog},user:function(){return this.$store.state.currentUser.user}},methods:{withdraw:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.withdrawCollateral(t.id,window.web3.utils.toBN(window.web3.utils.toWei(t.withdrawAmount))).send({from:t.user.address});case 4:t.$toast.success("Collatoral Deposited successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.close(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error("Transaction Reverted."),t.$store.dispatch("loading/activateLoader",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},close:function(){this.$store.dispatch("vault/withdrawDialog",!1)}},mounted:function(){}}),i=s,u=a("2877"),l=Object(u["a"])(i,n,o,!1,null,null,null);e["default"]=l.exports},5:function(t,e){},"55b1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-expand-lg  bg-dark"},[n("div",{staticClass:"container-fluid"},[n("img",{staticClass:"m-1",staticStyle:{"border-radius":"10px"},attrs:{src:t.logo,alt:"",width:"3%"}}),n("a",{staticClass:"navbar-brand",attrs:{href:"#"}}),t._m(0),n("div",{staticClass:"collapse navbar-collapse ",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link active nav-white",attrs:{to:"/"}},[t._v("Vault")])],1),t._m(1)]),n("div",{staticClass:"d-flex"},[n("button",{staticClass:"nav-button"},[n("span",{staticStyle:{"margin-right":"0",color:"white",padding:"6px","padding-left":"12px","padding-right":"14px"}},[t._v("$"+t._s(t.bnbprice))]),n("img",{staticStyle:{"margin-top":"10px","margin-left":"0","padding-right":"12px"},attrs:{src:a("619b"),height:"20px",alt:""}})]),n("button",{staticClass:"nav-button"},[n("img",{staticStyle:{"border-radius":"20px","margin-top":"10px","margin-left":"0","padding-left":"12px"},attrs:{src:t.logo,height:"20px",alt:""}}),n("span",{staticStyle:{"margin-right":"0",color:"white",padding:"8px"}},[t._v("$"+t._s(t.gDaiPrice))])]),t.user.id?n("div",{staticClass:"flex items-center rounded-lg bg-pink-deeper text-sm text-white py-2 px-3 connect-button"},[n("div",{staticClass:"mr-2",on:{click:function(e){t.dialog=!0}}},[t._v(t._s(t.addressFormated))])]):t._e(),t.user.id?t._e():n("button",{staticClass:"flex items-center rounded-lg bg-pink-deeper text-sm text-white py-2 px-3 connect-button"},[n("div",{staticClass:"mr-2",staticStyle:{color:"orangered"},on:{click:function(e){return t.login()}}},[t._v("connect wallet ")])])])])]),n("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-divider"),n("v-card-text",[t._v(" Do you want to logout? ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" cancel ")]),n("v-btn",{attrs:{color:"warning",text:""},on:{click:function(e){return t.logout()}}},[t._v(" logout ")])],1)],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link nav-white",attrs:{href:"#"}},[t._v("Swap")])])}],r={data:function(){return{dialog:!1,logo:a("e429")}},computed:{bnbprice:function(){return this.$store.state.constant.bnbprice},gDaiPrice:function(){return this.$store.state.constant.gDaiPrice},user:function(){return this.$store.state.currentUser.user},addressFormated:function(){return this.user.address?this.user.address.substring(0,6)+"...."+this.user.address.substring(this.user.address.length-4,this.user.address.length):""}},mounted:function(){var t=this;setInterval((function(){null!=localStorage.getItem("user")&&t.$store.dispatch("currentUser/setUser",null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{}),void 0==t.user.address&&t.$store.dispatch("currentUser/logout")}),1e3)},methods:{logout:function(){localStorage.removeItem("user"),this.$store.dispatch("currentUser/logout"),this.dialog=!1},login:function(){var t=this;this.$store.dispatch("metamask/innitaliseWeb3").then((function(e){console.log(e),t.$store.dispatch("metamask/validateMetamaskAvailable").then((function(e){console.log(e),t.$store.dispatch("metamask/loginMetaMask").then((function(){t.$toast.success("login successful"),t.$store.dispatch("currentUser/setUser",null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{})}))})).catch((function(e){t.$toast.error(e)}))})).catch((function(e){t.$toast.error(e)}))}}},s=r,i=a("2877"),u=Object(i["a"])(s,n,o,!1,null,null,null);e["default"]=u.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("loader")],1)},r=[],s={mounted:function(){}},i=s,u=a("2877"),l=Object(u["a"])(i,o,r,!1,null,null,null),c=l.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("topmenu"),a("vaultdetails",{attrs:{id:t.$route.params.id}})],1)},m=[],v={props:["id"],data:function(){return{}},mounted:function(){console.log(this.$route.params.id)}},f=v,b=Object(u["a"])(f,p,m,!1,null,null,null),h=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("topmenu"),t.user.address?a("div",[a("vault"),a("h6",{staticStyle:{"text-align":"center","padding-top":"30px"}},[t._v("Liquidate undercollateralized vaults in the "),a("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:t.openMonitor}},[t._v(" vault monitor!")])])],1):a("div",{staticClass:"alert alert-warninng "},[a("h4",{staticStyle:{"text-align":"center",color:"white"}},[t._v("Please connect your wallet ")])])],1)},y=[],w={data:function(){return{}},computed:{user:function(){return this.$store.state.currentUser.user}},methods:{openMonitor:function(){this.$router.push({path:"/monitor"})}},mounted:function(){}},x=w,C=Object(u["a"])(x,g,y,!1,null,null,null),k=C.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("topmenu"),t.user.address?a("div",[a("monitor")],1):a("div",{staticClass:"alert alert-warninng "},[a("h4",{staticStyle:{"text-align":"center",color:"white"}},[t._v("Please connect your wallet ")])])],1)},D=[],$={data:function(){return{}},computed:{user:function(){return this.$store.state.currentUser.user}}},S=$,O=Object(u["a"])(S,_,D,!1,null,null,null),M=O.exports;n["default"].use(d["a"]);var I=[{path:"/",component:k},{path:"/vault/:id",component:h},{path:"/monitor",component:M}],V=new d["a"]({mode:"history",routes:I}),P=V,R=a("2f62"),U=(a("d3b7"),a("bc3a")),A=a.n(U),L=a("1f5a");L.initialize("SWbDM0VX25m6PRF7c2hSdDS8uAUnDAd3JaTRo9ku"),L.serverURL="https://ejnhey9ha2gc.moralis.io:2053/server";var T=L,j={userAuthenticated:!1,user:{},loggedIn:!1,updateImageDialog:!1},N={},E={setUser:function(t,e){var a=t.commit;a("setActiveUser",e)},updateName:function(t,e){var a=t.commit;return new Promise((function(t,n){A.a.post("/api/profile/updatename",{name:e}).then((function(e){"200"==e.data.code?(a("setUser",e.data.user),t(e.data.msg)):n(e.data.error)})).catch((function(t){n(JSON.stringify(t))}))}))},updatePhoneNumber:function(t,e){var a=t.commit;return new Promise((function(t,n){A.a.post("/api/profile/updatephone",{phone_number:e}).then((function(e){"200"==e.data.code?(a("setUser",e.data.user),t(e.data.msg)):n(e.data.error)})).catch((function(t){n(JSON.stringify(t))}))}))},updatePassword:function(t,e){var a=t.commit;return new Promise((function(t,n){A.a.post("/api/profile/updatepassword",{password:e}).then((function(e){"200"==e.data.code?(a("setUser",e.data.user),t(e.data.msg)):n(e.data.error)})).catch((function(t){n(JSON.stringify(t))}))}))},uploadProfile:function(t,e){var a=this,n=t.commit;return new Promise((function(t,o){A.a.post("/api/profile/updateimage",e).then((function(e){console.log(e),"200"==e.data.code?(n("setUser",e.data.user),t("Profile Image Updated Successfully.")):o(a.response.data.error)})).catch((function(t){o(JSON.stringify(t))}))}))},updateImageDialogState:function(t,e){var a=t.commit;a("setUpdateImageDialog",e)},savePassword:function(t,e){return new Promise((function(t,a){A.a.post("/api/savepassword",{password:e.password,email:e.email,token:e.token}).then((function(e){"200"==e.data.code?t("password Reset  Sucessfully. You can Now Login."):a(e.data.error)})).catch((function(t){a(t.message)}))}))},ressetPassword:function(t,e){return new Promise((function(t,a){A.a.post("/api/resetpassword",{email:e}).then((function(e){"200"==e.data.code?t("password Reset Link Sent, Sucessfully."):"204"==e.data.code?a(e.data.message):"400"==e.data.code?a(e.data.error):a("Server Error!!! very Unusual Right?")})).catch((function(t){console.log(t),a(t.message)}))}))},registerUser:function(t,e){return new Promise((function(t,a){A.a.post("/api/register",{email:e.email,name:e.username,password:e.password}).then((function(e){console.log(e.data.code),"200"==e.data.code?t("Registration Succesfull"):a(e.data.error.email[0])})).catch((function(t){a(t.message)}))}))},attemptLogin:function(t){var e=t.commit,a=T.User.current();a&&(a.address=a.get("ethAddress"),e("setActiveUser",a))},getUser:function(t){var e=t.commit;A.a.get("/api/user").then((function(t){console.log(t.data),t.data.id?(e("setUser",t.data),e("setLoggedIn",!0)):window.location.href="/login"})).catch((function(t){console.log(t),window.location.href="/login"}))},logout:function(t){var e=t.commit;return new Promise((function(t){localStorage.setItem("user",JSON.stringify({})),e("removeUser"),t("successfully logged out")}))},Moralislogout:function(t){var e=t.commit;return new Promise((function(t,a){T.User.logOut().then((function(){e("removeUser"),t("successfully logged out")})).catch((function(t){return a(t)}))}))},loginUser:function(t){var e=t.commit;return new Promise((function(t,a){var n=T.User.current();n?e("setActiveUser",n):T.Web3.authenticate().then((function(a){console.log(a.get("ethAddress")),a.address=a.get("ethAddress"),e("setActiveUser",a),t("User Login Successful.")})).catch((function(t){a(t)}))}))}},F={setUpdateImageDialog:function(t,e){t.updateImageDialog=e},setLoggedIn:function(t,e){t.loggedIn=e},setActiveUser:function(t,e){t.user=e,t.userAuthenticated=!0},removeUser:function(t){t.user={},t.userAuthenticated=!1}},W={namespaced:!0,state:j,getters:N,actions:E,mutations:F},J={status:!0},B={},q={activateLoader:function(t,e){var a=t.commit;a("setLoader",e)}},z={setLoader:function(t,e){t.status=e}},H={namespaced:!0,state:J,getters:B,actions:q,mutations:z},Y={base_url:"http://127.0.0.1:3232/",api_url:"http://127.0.0.1:3232/api/",bnbprice:3230,gDaiPrice:.999},G={},X={},K={},Q={namespaced:!0,state:Y,getters:G,actions:X,mutations:K},Z=a("1da1"),tt=(a("96cf"),a("99e5")),et=a.n(tt),at=a("b1a3"),nt={user:{},poolBalance:0,netWorkID:0},ot={},rt={getNetwork:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,window.web3=new et.a(window.ethereum),e.next=4,window.web3.eth.net.getId();case 4:n=e.sent,a("setNeworkID",n);case 6:case"end":return e.stop()}}),e)})))()},logout:function(){return Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},innitaliseWeb3:function(){return Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=6;break}return window.web3=new et.a(window.ethereum),window.ethereum.enable(),t.next=5,new window.web3.eth.Contract(at["a"],at["b"]);case 5:window.tokenContract=t.sent;case 6:case"end":return t.stop()}}),t)})))()},validateMetamaskAvailable:function(){return new Promise((function(t,e){"undefined"!==typeof window.ethereum&&t("available"),e({message:"Metamask not installed, please install metamask to use this App."})}))},loginMetaMask:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,window.web3.eth.getAccounts();case 3:return n=e.sent,o=n[0],a("setUser",o),e.abrupt("return",new Promise((function(t){t("Login Successful")})));case 7:case"end":return e.stop()}}),e)})))()},setUser:function(t,e){var a=t.commit;a("setUser",e)}},st={setUser:function(t,e){var a={};a.id=Math.floor(1e3*Math.random())+1,a.address=e,t.user=a,localStorage.setItem("user",JSON.stringify(a))},setNeworkID:function(t,e){t.netWorkID=e}},it={namespaced:!0,state:nt,getters:ot,actions:rt,mutations:st},ut={depositDialog:!1,withdrawDialog:!1,borrowDialog:!1,vaultOwner:!1,rapayDialog:!1,transferVaultDialog:!1,vault:{}},lt={},ct={loadVault:function(t,e){var a=this;return Object(Z["a"])(regeneratorRuntime.mark((function n(){var o,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,n.next=3,window.tokenContract.methods.vaultOwner(e).call();case 3:return r=n.sent,a.state.currentUser.user.address.toLowerCase()==r.toLowerCase()&&o("setIsOwner",!0),s={},n.next=8,window.tokenContract.methods.vaultDebt(e).call();case 8:return s.debt=n.sent,s.debt=window.web3.utils.fromWei(s.debt),n.next=12,window.tokenContract.methods.vaultCollateral(e).call();case 12:s.vaultCollateral=n.sent,s.vaultCollateral=window.web3.utils.fromWei(s.vaultCollateral),s.ratio=0,a.vaultData=s,o("setVaultData",s);case 17:case"end":return n.stop()}}),n)})))()},transferVaultDialog:function(t,e){var a=t.commit;a("setTransferVaultDialog",e)},rapayDialog:function(t,e){var a=t.commit;a("setrapayDialog",e)},borrowDialog:function(t,e){var a=t.commit;a("setborrowDialog",e)},depositDialog:function(t,e){var a=t.commit;a("setdepositDialog",e)},withdrawDialog:function(t,e){var a=t.commit;a("setwithdrawDialog",e)},createVault:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.tokenContract.methods.createVault().send({from:t.state.currentUser.user.address}).then((function(t){return new Promise((function(e){e(t.events.CreateVault.returnValues.vaultID)}))})).catch((function(t){return new Promise((function(e,a){a(t)}))}));case 2:case"end":return e.stop()}}),e)})))()}},dt={setTransferVaultDialog:function(t,e){t.transferVaultDialog=e},setrapayDialog:function(t,e){t.rapayDialog=e},setborrowDialog:function(t,e){t.borrowDialog=e},setVaultData:function(t,e){t.vault=e},setIsOwner:function(t,e){t.vaultOwner=e},setwithdrawDialog:function(t,e){t.withdrawDialog=e},setdepositDialog:function(t,e){t.depositDialog=e}},pt={namespaced:!0,state:ut,getters:lt,actions:ct,mutations:dt};n["default"].use(R["a"]);var mt=new R["a"].Store({modules:{currentUser:W,loading:H,constant:Q,metamask:it,vault:pt}}),vt=a("b079"),ft=a.n(vt),bt=(a("4238"),a("ce5b")),ht=a.n(bt);a("bf40");n["default"].use(ht.a);var gt={theme:{dark:!0}},yt=new ht.a(gt);n["default"].config.productionTip=!1,n["default"].use(ft.a,{position:"top-right"}),n["default"].component("topmenu",a("55b1").default),n["default"].component("loader",a("a609").default),n["default"].component("vault",a("4d0e").default),n["default"].component("vaultdetails",a("a7cb").default),n["default"].component("depositecollateral",a("bdee").default),n["default"].component("withdrawcollateral",a("4e2b4").default),n["default"].component("borrowtoken",a("780c").default),n["default"].component("repaytoken",a("e56a").default),n["default"].component("transfervault",a("2464").default),n["default"].component("monitor",a("5a83").default),new n["default"]({router:P,store:mt,vuetify:yt,render:function(t){return t(c)}}).$mount("#app")},"5a83":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container",staticStyle:{height:"70vh","margin-top":"10vh"}},[t._m(0),a("div",{staticClass:"buttom-container"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.vaults,"items-per-page":5,"footer-props":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",prevIcon:"mdi-minus",nextIcon:"mdi-plus"}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",{on:{click:function(a){return t.openVault(e.item.id)}}},[a("td",[t._v("# "+t._s(e.item.id)+" ("+t._s(e.item.debtRatio)+"%)")]),a("td",[t._v("$"+t._s(e.item.vaultCollateral))]),a("td",[a("span",[t._v("$"+t._s(e.item.debt))])])])]}}])})],1)])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top-bar"},[a("div",{staticClass:"top-title"},[a("h4",[t._v(" Vault monitor")]),a("p",[t._v("Showing vaults close to liquidation")])])])}],r=a("53ca"),s=a("1da1"),i=(a("96cf"),a("b680"),a("b1a3")),u={data:function(){return{vaults:[],headers:[{text:"Vault ID + Ratio",sortable:!1,value:"id"},{text:"Collateral Value",value:"Collateral"},{text:"Debt",value:"Debt"}]}},mounted:function(){this.loadVault()},computed:{bnbprice:function(){return this.$store.state.constant.bnbprice},gDaiPrice:function(){return this.$store.state.constant.gDaiPrice},user:function(){return this.$store.state.currentUser.user}},methods:{openVault:function(t){this.$router.push("/vault/"+t)},loadVault:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.vaults=[],e.next=3,new window.web3.eth.Contract(i["a"],i["b"]);case 3:return window.tokenContract=e.sent,e.next=6,window.tokenContract.methods.vaultCount().call();case 6:a=e.sent,console.log(a),n=null!=localStorage.getItem(t.user.address.toLowerCase())?JSON.parse(localStorage.getItem(t.user.address.toLowerCase())):[],console.log(n),o=0;case 11:if(!(o<a)){e.next=31;break}return s={},s.id=o,e.next=16,window.tokenContract.methods.vaultDebt(o).call();case 16:return s.debt=e.sent,s.debt=window.web3.utils.fromWei(s.debt),e.next=20,window.tokenContract.methods.vaultCollateral(o).call();case 20:s.vaultCollateral=e.sent,s.vaultCollateral=window.web3.utils.fromWei(s.vaultCollateral),s.vaultCollateral=parseFloat(t.bnbprice)*parseFloat(s.vaultCollateral),s.debt=parseFloat(t.gDaiPrice)*parseFloat(s.debt),s.debtRatio=(parseFloat(s.vaultCollateral)/parseFloat(s.debt)*100).toFixed(2),console.log(Object(r["a"])(s.debt)),s.ratio=0,t.vaults.push(s);case 28:o++,e.next=11;break;case 31:case"end":return e.stop()}}),e)})))()}}},l=u,c=a("2877"),d=Object(c["a"])(l,n,o,!1,null,null,null);e["default"]=d.exports},6:function(t,e){},"619b":function(t,e,a){t.exports=a.p+"img/meta.023762b6.png"},7:function(t,e){},"780c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.borrowDialog,callback:function(e){t.borrowDialog=e},expression:"borrowDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v(" Borrow Token ")]),a("v-text-field",{attrs:{label:"Token Amount",type:"number",required:""},model:{value:t.borrowAmount,callback:function(e){t.borrowAmount=e},expression:"borrowAmount"}}),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v(" cancel ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.borrowToken}},[t._v(" Borrow ")])],1)],1)],1)},o=[],r=a("1da1"),s=(a("96cf"),{props:["id"],data:function(){return{borrowAmount:0}},computed:{borrowDialog:function(){return this.$store.state.vault.borrowDialog},user:function(){return this.$store.state.currentUser.user}},methods:{borrowToken:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.borrowToken(t.id,window.web3.utils.toBN(window.web3.utils.toWei(t.borrowAmount))).send({from:t.user.address});case 4:t.$toast.success("Token Borrowed successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.close(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error("Transaction Reverted."),t.$store.dispatch("loading/activateLoader",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},close:function(){this.$store.dispatch("vault/borrowDialog",!1)}},mounted:function(){}}),i=s,u=a("2877"),l=Object(u["a"])(i,n,o,!1,null,null,null);e["default"]=l.exports},8:function(t,e){},9:function(t,e){},9873:function(t,e,a){},a609:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"con"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loader"},[a("div",{staticClass:"nb-spinner"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[a("v-app",{staticStyle:{background:"none",margin:"0",padding:"0"}},[a("router-view")],1)],1)])},o=[],r={data:function(){return{}},computed:{loading:function(){return this.$store.state.loading.status}},mounted:function(){var t=this;setTimeout((function(){t.$store.dispatch("loading/activateLoader",!1)}),1e3),this.$store.dispatch("currentUser/setUser",null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{}),this.$store.dispatch("metamask/getNetwork"),this.$store.dispatch("metamask/innitaliseWeb3"),window.ethereum.on("accountsChanged",(function(t){console.log(t[0]);var e={};e.id=Math.floor(1e3*Math.random())+1,e.address=t[0],localStorage.setItem("user",JSON.stringify(e))})),window.ethereum.on("disconnect",(function(t){console.log(t[0]),console.log("disconnected"),localStorage.removeItem("user")}))}},s=r,i=(a("f5e5"),a("2877")),u=Object(i["a"])(s,n,o,!1,null,null,null);e["default"]=u.exports},a7cb:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 offset-2 grid-margin stretch-card "},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body",staticStyle:{background:"#263238 !important"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loader"},[a("div",{staticClass:"nb-spinner"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"card-title"},[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"fas fa-arrow-left"})]),a("span",{staticClass:"float-right"},[t._v("Vault ID #"+t._s(t.id))])],1)]),t._m(0),a("div",{staticClass:"col-md-12"},[a("h4",[t._v("Vault Info")]),a("h6",[t._v("Collateral "),a("span",{staticClass:"float-right"},[t._v(t._s(t.vaultData.vaultCollateral)+" Matic")])]),a("h6",[t._v("Debt "),a("span",{staticClass:"float-right"},[t._v(t._s(t.vaultData.debt)+" ghoshDai (gDai)")])]),a("h6",[t._v("Collateral Value "),a("span",{staticClass:"float-right"},[t._v("$"+t._s(parseFloat(t.bnbprice)*parseFloat(t.vaultData.vaultCollateral))+" USD")])]),a("h6",[t._v("Debt Value "),a("span",{staticClass:"float-right"},[t._v("$"+t._s(parseFloat(t.gDaiPrice)*parseFloat(t.vaultData.debt))+" USD")])]),a("h6",[t._v("Collateral to Debt Ratio "),a("span",{staticClass:"float-right"},[t._v(t._s(parseFloat(t.bnbprice)*parseFloat(t.vaultData.vaultCollateral)/(parseFloat(t.gDaiPrice)*parseFloat(t.vaultData.debt))*100)+" %")])]),t._m(1)]),a("div",{staticClass:"col-md-12"},[a("h6",[t._v("Current MATIC price "),a("span",{staticClass:"float-right"},[t._v("$"+t._s(t.bnbprice))])])]),t.vaultOwner?a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-success m-1",on:{click:t.openDeopsitModal}},[t._v("Deposit Collatoral")]),a("button",{staticClass:"btn btn-success m-1",on:{click:t.openWithdrawModal}},[t._v("Withdraw Collatoral")]),a("button",{staticClass:"btn btn-warning m-1",on:{click:t.openborrowModal}},[t._v("Borrow Token")]),a("button",{staticClass:"btn btn-warning m-1",on:{click:t.openrepayModal}},[t._v("PayBack Token")]),a("button",{staticClass:"btn btn-warning m-1",on:{click:t.openTransferModal}},[t._v("Transfer Vault")]),a("button",{staticClass:"btn btn-danger m-1"},[t._v("Destroy Vault")])]):t._e(),t._m(2),a("h4",[t._v("Liquidation Details")]),a("h6",[t._v("Current ETH price "),a("span",{staticClass:"float-right"},[t._v("$"+t._s(t.bnbprice))])]),a("h6",[t._v("Estimated liquidation price "),a("span",{staticClass:"float-right"},[t._v("$"+t._s((t.bnbprice/3).toFixed(2)))])])])])])]),a("depositecollateral",{attrs:{id:t.id}}),a("withdrawcollateral",{attrs:{id:t.id}}),a("borrowtoken",{attrs:{id:t.id}}),a("repaytoken",{attrs:{id:t.id}}),a("transfervault",{attrs:{id:t.id}})],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("hr",{staticClass:"alert-success mt-4"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",[t._v("Collateral to Debt Ratio "),a("span",{staticClass:"float-right"},[t._v("150.00 %")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("hr",{staticClass:"alert-success mt-4"})])}],r=a("1da1"),s=(a("96cf"),{props:["id"],data:function(){return{owner:"",loading:!1}},mounted:function(){var t=this;setTimeout((function(){t.loadData()}),1e3),console.log(this.$route.params.id)},computed:{bnbprice:function(){return this.$store.state.constant.bnbprice},gDaiPrice:function(){return this.$store.state.constant.gDaiPrice},vaultData:function(){return this.$store.state.vault.vault},vaultOwner:function(){return this.$store.state.vault.vaultOwner},user:function(){return this.$store.state.currentUser.user}},methods:{openTransferModal:function(){this.$store.dispatch("vault/transferVaultDialog",!0)},openborrowModal:function(){this.$store.dispatch("vault/borrowDialog",!0)},openrepayModal:function(){this.$store.dispatch("vault/rapayDialog",!0)},openDeopsitModal:function(){this.$store.dispatch("vault/depositDialog",!0)},openWithdrawModal:function(){this.$store.dispatch("vault/withdrawDialog",!0)},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("vault/loadVault",t.id);case 1:case"end":return e.stop()}}),e)})))()}}}),i=s,u=a("2877"),l=Object(u["a"])(i,n,o,!1,null,null,null);e["default"]=l.exports},b1a3:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var n=[{constant:!1,inputs:[{name:"_tokenPeg",type:"uint256"}],name:"setTokenPeg",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"stabilityPool",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"ethPriceSourceAddress",type:"address"}],name:"changeEthPriceSource",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"},{name:"amount",type:"uint256"}],name:"borrowToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"closingFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"vaultOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"setClosingFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"},{name:"to",type:"address"}],name:"transferVault",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"},{name:"amount",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ethPriceSource",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"createVault",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"treasury",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_treasury",type:"uint256"}],name:"setTreasury",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"openingFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"},{name:"amount",type:"uint256"}],name:"withdrawCollateral",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"},{name:"amount",type:"uint256"}],name:"payBackToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"}],name:"destroyVault",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"setOpeningFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDebtCeiling",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getEthPriceSource",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_pool",type:"address"}],name:"setStabilityPool",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"},{name:"amount",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"vaultExistence",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getClosingFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"vaultCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOpeningFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"setDebtCeiling",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"}],name:"depositCollateral",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"erc721",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTokenPriceSource",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokenPeg",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"vaultID",type:"uint256"}],name:"buyRiskyVault",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"vaultDebt",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"vaultCollateral",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"debtCeiling",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ethPriceSourceAddress",type:"address"},{name:"minimumCollateralPercentage",type:"uint256"},{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"vaultAddress",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"creator",type:"address"}],name:"CreateVault",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"}],name:"DestroyVault",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"from",type:"address"},{indexed:!1,name:"to",type:"address"}],name:"TransferVault",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"amount",type:"uint256"}],name:"DepositCollateral",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"amount",type:"uint256"}],name:"WithdrawCollateral",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"amount",type:"uint256"}],name:"BorrowToken",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"closingFee",type:"uint256"}],name:"PayBackToken",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"vaultID",type:"uint256"},{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"buyer",type:"address"},{indexed:!1,name:"amountPaid",type:"uint256"}],name:"BuyRiskyVault",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}],o="0x0138391b1edf11911C74717392645238d0Da1Fd9"},bdee:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.depositDialog,callback:function(e){t.depositDialog=e},expression:"depositDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v(" Deposit Collateral ")]),a("v-text-field",{attrs:{label:"Deposit Amount",type:"number",required:""},model:{value:t.depositAmount,callback:function(e){t.depositAmount=e},expression:"depositAmount"}}),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v(" cancel ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.deposit}},[t._v(" Deposit ")])],1)],1)],1)},o=[],r=a("1da1"),s=(a("96cf"),{props:["id"],data:function(){return{depositAmount:0}},computed:{depositDialog:function(){return this.$store.state.vault.depositDialog},user:function(){return this.$store.state.currentUser.user}},methods:{deposit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.depositCollateral(t.id).send({from:t.user.address,value:window.web3.utils.toBN(window.web3.utils.toWei(t.depositAmount))});case 4:t.$toast.success("Collatoral Deposited successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.close(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error("Transaction Reverted."),t.$store.dispatch("loading/activateLoader",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},close:function(){this.$store.dispatch("vault/depositDialog",!1)}},mounted:function(){}}),i=s,u=a("2877"),l=Object(u["a"])(i,n,o,!1,null,null,null);e["default"]=l.exports},e429:function(t,e,a){t.exports=a.p+"img/image.8bed04ce.png"},e56a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.rapayDialog,callback:function(e){t.rapayDialog=e},expression:"rapayDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 grey lighten-2"},[t._v(" Repay Token ")]),a("v-text-field",{attrs:{label:"Token Amount",type:"number",required:""},model:{value:t.repayAmount,callback:function(e){t.repayAmount=e},expression:"repayAmount"}}),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v(" cancel ")]),t.approve?a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.approveToken}},[t._v(" Approve ")]):a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.repayToken}},[t._v(" Repay ")])],1)],1)],1)},o=[],r=a("1da1"),s=(a("96cf"),a("b1a3")),i={props:["id"],data:function(){return{approve:!0,repayAmount:0}},computed:{rapayDialog:function(){return this.$store.state.vault.rapayDialog},user:function(){return this.$store.state.currentUser.user}},methods:{approveToken:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.approve(s["b"],window.web3.utils.toBN(window.web3.utils.toWei(t.repayAmount))).send({from:t.user.address});case 4:t.$toast.success("Token Approved successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.approve=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$toast.error("error approving token"),console.log(e.t0),t.$store.dispatch("loading/activateLoader",!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))()},repayToken:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/activateLoader",!0),e.prev=1,e.next=4,window.tokenContract.methods.payBackToken(t.id,window.web3.utils.toBN(window.web3.utils.toWei(t.repayAmount))).send({from:t.user.address});case 4:t.$toast.success("Token Repayed successfully"),t.$store.dispatch("loading/activateLoader",!1),t.$store.dispatch("vault/loadVault",t.id),t.approve=!0,t.close(),e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](1),t.$toast.error("Transaction Reverted."),console.log(JSON.parse(e.t0)),t.$store.dispatch("loading/activateLoader",!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},close:function(){this.$store.dispatch("vault/rapayDialog",!1)}},mounted:function(){}},u=i,l=a("2877"),c=Object(l["a"])(u,n,o,!1,null,null,null);e["default"]=c.exports},f5e5:function(t,e,a){"use strict";a("9873")}});
//# sourceMappingURL=app.9f7ecd9d.js.map